---
title: Public perceptions of multiple risks during the COVID-19 pandemic in Italy
  and Sweden. Reproducing original findings and extending it with data for Poland.
author: "Mateusz Bary≈Ça, Konrad Lewszyk"
date: "May 26, 2022"
header-includes:
- \usepackage{booktabs}
output:
  slidy_presentation: default
  beamer_presentation: default
---

```{r, echo = FALSE, results = 'hide', message = FALSE, warning = FALSE, fig.show = 'hide'}

library(dplyr)
library(DiagrammeR)
```
# Agenda

1. Searching for the right study
2. The original study 
3. Survey replication
4. Extended study
5. Original data
6. Gathered data
7. Steps to preprocess
8. Functions and good practice coding
9. Full reproducibility
10. Results

# Searching for the study

What we looked for in our target study:
<br />
1. Available data with labeled and coherent variables
<br />
2. Available survey process
<br />
3. Available codes
<br />
4. A realistic reproducible approach


# Original Study
```{r, out.width = "600px", echo = FALSE, fig.align='center'}
knitr::include_graphics("pictures_for_presentation/picture_1.jpg")
```

<br />
```{r, out.width = "600px", echo = FALSE, fig.align='center'}
knitr::include_graphics("pictures_for_presentation/picture_2.jpg")
```

<br />
```{r, out.width = "600px", echo = FALSE, fig.align='center'}
knitr::include_graphics("pictures_for_presentation/picture_3.jpg")
```

<br />
```{r, out.width = "600px", echo = FALSE, fig.align='center'}
knitr::include_graphics("pictures_for_presentation/picture_4.jpg")
```

# Survey replication

Link to our survey: https://docs.google.com/forms/d/e/1FAIpQLSeN__k2KDdbRZIkhZ3ubUIVTXc6kPAtjSIqh1bI07bDzVrpNg/viewform?fbclid=IwAR26g8tf0azKeNHSU1FgNR1wvvhTrOis891X9dU9bBNVU1gdfoan9cZkcVE


# Extended study

We extended the study by collecting data from Polish respondents and we managed to get a little over 20 respondents to participate. As the sample we collected was rather small, there was no point in extending the study by Poland's regional analysis. Therefore we focued on the radar graphs and the perceptions of risk by country.

<br />

It is crucial to mention that the study was conducted during the onset of the pandemic in 2020. Our extension of the study was done after the vaccination period and towards the end of the pandemic. This means that our respondents could perceive risk differently now than they have two years ago. Simply put the time factor impacts our study.

# Original data

```{r, results = "asis", echo = FALSE, message = FALSE, warning = FALSE, fig.show = 'hide'}
df <- read.csv("data/Dataset_round1_august2020.csv", header = TRUE, na = "999")
df %>%
        head() %>%
        knitr::kable(format = "markdown", booktabs = T) %>%
        kableExtra::kable_styling(font_size = 7)
```

# Gathered data

```{r, echo = FALSE, message = FALSE, warning = FALSE, fig.show = 'hide'}
df_new <- read.csv("data/survey.csv", header = TRUE, na = "999")
df_new %>%
        head() %>%
        knitr::kable(format = "markdown", booktabs = T) %>%
        kableExtra::kable_paper(font_size = 7)
```

# Steps to preprocess
<center>
```{r echo = FALSE,  message = FALSE, warning = FALSE, fig.show = 'hide', fig.align='center'}
grViz("digraph {
graph [layout = dot, rankdir = TB]

node [shape = rectangle]
rec1 [label = 'Step 1. Creating mapping tibble between original column names and collected ones']
rec2 [label = 'Step 2. Splitting the data depending on scale (Likert, dichotomous, numeric']
rec3 [label =  'Step 3. For each datarame we do a conversion between original values mainly with pivoting.']
rec4 [label = 'Step 4. Joining the DataFrames into one, final one.']

# edge definitions with the node IDs
rec1 -> rec2 -> rec3 -> rec4
}",
                  height = 300)
```
</center>

# Functions and good practice coding

In order to follow the teachings of the Reproducible Research class, we wrote the following functions to automate our graphing process:
<br />
1. derive_necessary_columns
<br />
2. aggregate_method
<br />
3. derive_dataframe_for_country
<br />
4. graph_radar
<br />


# Full reproducibility

1. Groundhog library for reproducible environment
2. GitHub for working on code (we created issue and PR, as well as merge to master branch)
3. Google Drive for storing data (we know that storing data on public repository is not a good practice)
4.

# Results

## Damage
```{r, out.width = "500px", echo = FALSE}
knitr::include_graphics("pictures_for_presentation/result_1.jpg")
knitr::include_graphics("pictures_for_presentation/result_2.jpg")
knitr::include_graphics("pictures_for_presentation/result_3.jpg")
```
<br />

## Preparedness
```{r, out.width = "500px", echo = FALSE}
knitr::include_graphics("pictures_for_presentation/result_4.jpg")
knitr::include_graphics("pictures_for_presentation/result_5.jpg")
knitr::include_graphics("pictures_for_presentation/result_6.jpg")
```
<br />

## Knowledge
```{r, out.width = "500px", echo = FALSE}
knitr::include_graphics("pictures_for_presentation/result_7.jpg")
knitr::include_graphics("pictures_for_presentation/result_8.jpg")
knitr::include_graphics("pictures_for_presentation/result_9.jpg")
```

# Sources

Original study: https://www.nature.com/articles/s41597-020-00778-7?fbclid=IwAR1GqAQNW6oCa3gQLC9JEpVaJBAw8SBcc7fobxNX5ybJzwzZvirVxixXVlY